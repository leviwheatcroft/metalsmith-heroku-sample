{"version":3,"sources":["../lib/plugins/dev-server.js"],"names":["options","files","metalsmith","done","server","path","_destination","index","createServer","request","response","meta","url","slice","setHeader","mimeType","dbg","listen"],"mappings":";;;;;;kBAMe,UAAUA,OAAV,EAAmB;AAChC,SAAO,CAACC,KAAD,EAAQC,UAAR,EAAoBC,IAApB,KAA6B;AAClC,QAAIC,SAAS,kBAAG;AACdC,YAAMH,WAAWI,YADH;AAEdC,aAAO;AAFO,KAAH,CAAb;;AAKA,mBAAKC,YAAL,CAAkB,CAACC,OAAD,EAAUC,QAAV,KAAuB;AACvC,UAAIC,OAAOV,MAAMQ,QAAQG,GAAR,CAAYC,KAAZ,CAAkB,CAAlB,CAAN,KAA+B,EAA1C;AACAH,eAASI,SAAT,CACE,cADF,EAEEH,KAAKI,QAAL,GAAgBJ,KAAKI,QAArB,GAAgC,WAFlC;AAIAX,aAAOK,OAAP,EAAgBC,QAAhB;AACAM,UAAK,QAAOP,QAAQG,GAAR,CAAYC,KAAZ,CAAkB,CAAlB,CAAqB,EAAjC;AACD,KARD,EAQGI,MARH,CAQU,IARV;AASAd;AACD,GAhBD;AAiBD,C;;AAxBD;;;;AACA;;;;AACA;;;;;;AAEA,IAAIa,MAAM,qBAAM,mBAAN,CAAV","file":"dev-server.js","sourcesContent":["import debug from 'debug'\nimport http from 'http'\nimport st from 'st'\n\nlet dbg = debug('metalsmith-smsftr')\n\nexport default function (options) {\n  return (files, metalsmith, done) => {\n    let server = st({\n      path: metalsmith._destination,\n      index: 'index'\n    })\n\n    http.createServer((request, response) => {\n      let meta = files[request.url.slice(1)] || {}\n      response.setHeader(\n        'Content-Type',\n        meta.mimeType ? meta.mimeType : 'text/html'\n      )\n      server(request, response)\n      dbg(`req: ${request.url.slice(1)}`)\n    }).listen(8080)\n    done()\n  }\n}\n"]}